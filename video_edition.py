from moviepy.editor import VideoFileClip, AudioFileClip, TextClip, CompositeVideoClip, os
import random

def crop_to_9_16(video):
    original_width, original_height = video.size
    new_width = original_height * 9 // 16

    x_center = original_width // 2
    x1 = max(0, x_center - new_width // 2)
    x2 = min(original_width, x_center + new_width // 2)

    cropped_video = video.crop(x1=x1, y1=0, x2=x2, y2=original_height)
    return cropped_video

def buildClip(video_file, audio_file):
    video = VideoFileClip(video_file)
    audio = AudioFileClip(audio_file)
    time_delta = 0.5
    audio_duration = audio.duration + time_delta
    video_duration = video.duration

    superior_limit = video_duration - audio_duration 
    start = random.uniform(0, superior_limit)
    end = start + audio_duration 
    clip = video.subclip(start, end)
    clip = crop_to_9_16(clip)
    clip = clip.set_audio(audio)
    return clip

def add_subtitles_to_video(video, subtitles, output_file):
    text_clips = []
    font_path = "Montserrat-ExtraBold.ttf"
    
    for subtitle in subtitles:
        text = subtitle['word']
        start_time = subtitle['start']
        duration = subtitle['duration']
        if text != "":
            text_clip = TextClip(
                text,
                fontsize=35,
                font=font_path,
                color='white',
                stroke_color='black',
                stroke_width=2,
                bg_color='None',
                size=(video.w * 0.9, None),
                method='caption'
            ).set_duration(duration).set_start(start_time).set_position('center')
            text_clips.append(text_clip)
    
    video_with_subtitles = CompositeVideoClip([video] + text_clips)
    video_with_subtitles.write_videofile(output_file, codec='libx264')

def test():
    video_file = "minecraft.mp4"
    subs = [{'word': 'life', 'start': 0.0, 'end': 0.4000000059604645}, {'word': 'changing', 'start': 0.4000000059604645, 'end': 0.7599999904632568}, {'word': 'incident', 'start': 0.7599999904632568, 'end': 1.3200000524520874}, {'word': 'At', 'start': 2.5199999809265137, 'end': 2.619999885559082}, {'word': '19', 'start': 2.619999885559082, 'end': 3.119999885559082}, {'word': 'years', 'start': 3.119999885559082, 'end': 3.4000000953674316}, {'word': 'old', 'start': 3.4000000953674316, 'end': 3.6600000858306885}, {'word': 'I', 'start': 3.940000057220459, 'end': 4.0}, {'word': 'was', 'start': 4.0, 'end': 4.239999771118164}, {'word': 'involved', 'start': 4.239999771118164, 'end': 4.519999980926514}, {'word': 'in', 'start': 4.519999980926514, 'end': 4.699999809265137}, {'word': 'a', 'start': 4.699999809265137, 'end': 4.880000114440918}, {'word': 'car', 'start': 4.880000114440918, 'end': 5.059999942779541}, {'word': 'accident', 'start': 5.059999942779541, 'end': 5.340000152587891}, {'word': 'that', 'start': 5.340000152587891, 'end': 5.699999809265137}, {'word': 'changed', 'start': 5.699999809265137, 'end': 6.059999942779541}, {'word': 'my', 'start': 6.059999942779541, 'end': 6.380000114440918}, {'word': 'life', 'start': 6.380000114440918, 'end': 6.699999809265137}, {'word': 'It', 'start': 7.320000171661377, 'end': 7.480000019073486}, {'word': 'was', 'start': 7.480000019073486, 'end': 7.639999866485596}, {'word': 'around', 'start': 7.639999866485596, 'end': 7.900000095367432}, {'word': '11', 'start': 7.900000095367432, 'end': 8.220000267028809}, {'word': 'AM', 'start': 8.220000267028809, 'end': 8.539999961853027}, {'word': 'and', 'start': 8.859999656677246, 'end': 8.9399995803833}, {'word': 'my', 'start': 8.9399995803833, 'end': 9.279999732971191}, {'word': 'friends', 'start': 9.279999732971191, 'end': 9.460000038146973}, {'word': 'and', 'start': 9.460000038146973, 'end': 9.680000305175781}, {'word': 'I', 'start': 9.680000305175781, 'end': 9.9399995803833}, {'word': 'decided', 'start': 9.9399995803833, 'end': 10.199999809265137}, {'word': 'to', 'start': 10.199999809265137, 'end': 10.4399995803833}, {'word': 'take', 'start': 10.4399995803833, 'end': 10.600000381469727}, {'word': 'a', 'start': 10.600000381469727, 'end': 11.0}, {'word': 'drive', 'start': 11.0, 'end': 11.0}, {'word': 'in', 'start': 11.0, 'end': 11.119999885559082}, {'word': 'my', 'start': 11.119999885559082, 'end': 11.300000190734863}, {'word': 'new', 'start': 11.300000190734863, 'end': 11.579999923706055}, {'word': 'car', 'start': 11.579999923706055, 'end': 11.800000190734863}, {'word': 'Though', 'start': 12.479999542236328, 'end': 12.539999961853027}, {'word': 'I', 'start': 12.539999961853027, 'end': 12.699999809265137}, {'word': "didn't", 'start': 12.699999809265137, 'end': 12.880000114440918}, {'word': 'work', 'start': 12.880000114440918, 'end': 13.119999885559082}, {'word': 'that', 'start': 13.119999885559082, 'end': 13.34000015258789}, {'word': 'day', 'start': 13.34000015258789, 'end': 13.600000381469727}, {'word': 'I', 'start': 13.84000015258789, 'end': 14.0600004196167}, {'word': 'drove', 'start': 14.0600004196167, 'end': 14.180000305175781}, {'word': 'to', 'start': 14.180000305175781, 'end': 14.359999656677246}, {'word': 'their', 'start': 14.359999656677246, 'end': 14.520000457763672}, {'word': 'workplace', 'start': 14.520000457763672, 'end': 14.9399995803833}, {'word': 'to', 'start': 14.9399995803833, 'end': 15.279999732971191}, {'word': 'meet', 'start': 15.279999732971191, 'end': 15.380000114440918}, {'word': 'them', 'start': 15.380000114440918, 'end': 15.579999923706055}, {'word': 'We', 'start': 16.280000686645508, 'end': 16.420000076293945}, {'word': 'had', 'start': 16.420000076293945, 'end': 16.579999923706055}, {'word': 'a', 'start': 16.579999923706055, 'end': 16.739999771118164}, {'word': 'brief', 'start': 16.739999771118164, 'end': 16.959999084472656}, {'word': 'photo', 'start': 16.959999084472656, 'end': 17.31999969482422}, {'word': 'session', 'start': 17.31999969482422, 'end': 17.6200008392334}, {'word': 'and', 'start': 17.6200008392334, 'end': 17.940000534057617}, {'word': 'debated', 'start': 17.940000534057617, 'end': 18.260000228881836}, {'word': 'our', 'start': 18.260000228881836, 'end': 18.559999465942383}, {'word': 'next', 'start': 18.559999465942383, 'end': 18.920000076293945}, {'word': 'destination', 'start': 18.920000076293945, 'end': 19.459999084472656}, {'word': 'One', 'start': 20.479999542236328, 'end': 20.799999237060547}, {'word': 'friend', 'start': 20.799999237060547, 'end': 21.15999984741211}, {'word': 'suggested', 'start': 21.15999984741211, 'end': 21.739999771118164}, {'word': 'heading', 'start': 21.739999771118164, 'end': 22.0}, {'word': 'to', 'start': 22.0, 'end': 22.239999771118164}, {'word': 'the', 'start': 22.239999771118164, 'end': 22.6200008392334}, {'word': 'hills', 'start': 22.6200008392334, 'end': 22.6200008392334}, {'word': 'for', 'start': 22.6200008392334, 'end': 22.81999969482422}, {'word': 'a', 'start': 22.81999969482422, 'end': 23.040000915527344}, {'word': 'popular', 'start': 23.040000915527344, 'end': 23.559999465942383}, {'word': 'viewpoint', 'start': 23.559999465942383, 'end': 24.040000915527344}, {'word': 'in', 'start': 24.040000915527344, 'end': 24.260000228881836}, {'word': 'the', 'start': 24.260000228881836, 'end': 24.5}, {'word': 'city', 'start': 24.5, 'end': 24.639999389648438}, {'word': 'We', 'start': 24.860000610351562, 'end': 25.440000534057617}, {'word': 'took', 'start': 25.440000534057617, 'end': 25.600000381469727}, {'word': 'more', 'start': 25.600000381469727, 'end': 25.940000534057617}, {'word': 'pictures', 'start': 25.940000534057617, 'end': 26.280000686645508}, {'word': 'before', 'start': 26.280000686645508, 'end': 26.65999984741211}, {'word': 'setting', 'start': 26.65999984741211, 'end': 26.959999084472656}, {'word': 'off', 'start': 26.959999084472656, 'end': 27.299999237060547}, {'word': 'and', 'start': 27.6200008392334, 'end': 27.81999969482422}, {'word': "that's", 'start': 27.81999969482422, 'end': 28.040000915527344}, {'word': 'the', 'start': 28.040000915527344, 'end': 28.200000762939453}, {'word': 'last', 'start': 28.200000762939453, 'end': 28.440000534057617}, {'word': 'thing', 'start': 28.440000534057617, 'end': 28.579999923706055}, {'word': 'I', 'start': 28.579999923706055, 'end': 29.040000915527344}, {'word': 'remember', 'start': 29.040000915527344, 'end': 29.100000381469727}, {'word': 'The', 'start': 29.100000381469727, 'end': 29.639999389648438}, {'word': 'next', 'start': 29.639999389648438, 'end': 29.940000534057617}, {'word': 'moment', 'start': 29.940000534057617, 'end': 30.280000686645508}, {'word': 'I', 'start': 30.479999542236328, 'end': 30.739999771118164}, {'word': 'woke', 'start': 30.739999771118164, 'end': 30.760000228881836}, {'word': 'up', 'start': 30.760000228881836, 'end': 30.959999084472656}, {'word': 'from', 'start': 30.959999084472656, 'end': 31.079999923706055}, {'word': 'a', 'start': 31.079999923706055, 'end': 31.440000534057617}, {'word': 'coma', 'start': 31.440000534057617, 'end': 31.440000534057617}, {'word': 'in', 'start': 31.440000534057617, 'end': 31.639999389648438}, {'word': 'the', 'start': 31.639999389648438, 'end': 31.920000076293945}, {'word': 'hospital', 'start': 31.920000076293945, 'end': 32.15999984741211}, {'word': 'nine', 'start': 32.15999984741211, 'end': 32.70000076293945}, {'word': 'months', 'start': 32.70000076293945, 'end': 32.939998626708984}, {'word': 'later', 'start': 32.939998626708984, 'end': 33.400001525878906}, {'word': 'missing', 'start': 33.959999084472656, 'end': 33.97999954223633}, {'word': 'my', 'start': 33.97999954223633, 'end': 34.279998779296875}, {'word': 'left', 'start': 34.279998779296875, 'end': 34.52000045776367}, {'word': 'hand', 'start': 34.52000045776367, 'end': 34.900001525878906}, {'word': 'and', 'start': 34.900001525878906, 'end': 35.279998779296875}, {'word': 'left', 'start': 35.279998779296875, 'end': 35.5}, {'word': 'eye', 'start': 35.5, 'end': 36.060001373291016}, {'word': 'unable', 'start': 36.099998474121094, 'end': 36.279998779296875}, {'word': 'to', 'start': 36.279998779296875, 'end': 36.900001525878906}, {'word': 'walk', 'start': 36.900001525878906, 'end': 36.91999816894531}, {'word': 'I', 'start': 37.099998474121094, 'end': 37.959999084472656}, {'word': 'learned', 'start': 37.959999084472656, 'end': 38.220001220703125}, {'word': 'that', 'start': 38.220001220703125, 'end': 38.619998931884766}, {'word': 'on', 'start': 38.619998931884766, 'end': 38.91999816894531}, {'word': 'our', 'start': 38.91999816894531, 'end': 39.08000183105469}, {'word': 'way', 'start': 39.08000183105469, 'end': 39.36000061035156}, {'word': 'we', 'start': 39.52000045776367, 'end': 39.599998474121094}, {'word': 'were', 'start': 39.599998474121094, 'end': 39.7400016784668}, {'word': 'on', 'start': 39.7400016784668, 'end': 39.86000061035156}, {'word': 'the', 'start': 39.86000061035156, 'end': 40.099998474121094}, {'word': 'freeway', 'start': 40.099998474121094, 'end': 40.36000061035156}, {'word': 'when', 'start': 40.36000061035156, 'end': 40.58000183105469}, {'word': 'a', 'start': 40.58000183105469, 'end': 40.959999084472656}, {'word': 'Dodge', 'start': 40.959999084472656, 'end': 41.060001373291016}, {'word': 'Challenger', 'start': 41.060001373291016, 'end': 41.540000915527344}, {'word': 'traveling', 'start': 42.279998779296875, 'end': 42.279998779296875}, {'word': 'at', 'start': 42.279998779296875, 'end': 42.560001373291016}, {'word': '150', 'start': 42.560001373291016, 'end': 43.2400016784668}, {'word': 'miles', 'start': 43.2400016784668, 'end': 43.439998626708984}, {'word': 'per', 'start': 43.439998626708984, 'end': 43.81999969482422}, {'word': 'hour', 'start': 43.81999969482422, 'end': 44.02000045776367}, {'word': 'collided', 'start': 44.58000183105469, 'end': 44.599998474121094}, {'word': 'with', 'start': 44.599998474121094, 'end': 44.86000061035156}, {'word': 'my', 'start': 44.86000061035156, 'end': 45.099998474121094}, {'word': 'gas', 'start': 45.099998474121094, 'end': 45.400001525878906}, {'word': 'tank', 'start': 45.400001525878906, 'end': 45.65999984741211}, {'word': 'My', 'start': 46.279998779296875, 'end': 46.720001220703125}, {'word': 'small', 'start': 46.720001220703125, 'end': 47.040000915527344}, {'word': 'coupe', 'start': 47.040000915527344, 'end': 47.2400016784668}, {'word': 'quickly', 'start': 47.2400016784668, 'end': 47.68000030517578}, {'word': 'ignited', 'start': 47.68000030517578, 'end': 48.099998474121094}, {'word': "It's", 'start': 48.81999969482422, 'end': 49.13999938964844}, {'word': 'believed', 'start': 49.13999938964844, 'end': 49.29999923706055}, {'word': 'that', 'start': 49.29999923706055, 'end': 49.52000045776367}, {'word': 'I', 'start': 49.52000045776367, 'end': 49.81999969482422}, {'word': 'passed', 'start': 49.81999969482422, 'end': 49.939998626708984}, {'word': 'out', 'start': 49.939998626708984, 'end': 50.18000030517578}, {'word': 'from', 'start': 50.18000030517578, 'end': 50.34000015258789}, {'word': 'the', 'start': 50.34000015258789, 'end': 50.720001220703125}, {'word': 'impact', 'start': 50.720001220703125, 'end': 51.02000045776367}, {'word': 'which', 'start': 51.2400016784668, 'end': 51.5}, {'word': 'resulted', 'start': 51.5, 'end': 51.84000015258789}, {'word': 'in', 'start': 51.84000015258789, 'end': 52.060001373291016}, {'word': 'a', 'start': 52.060001373291016, 'end': 52.599998474121094}, {'word': 'traumatic', 'start': 52.599998474121094, 'end': 52.599998474121094}, {'word': 'brain', 'start': 52.599998474121094, 'end': 52.91999816894531}, {'word': 'injury', 'start': 52.91999816894531, 'end': 53.2400016784668}, {'word': '90', 'start': 54.060001373291016, 'end': 54.34000015258789}, {'word': '', 'start': 54.34000015258789, 'end': 54.41999816894531}, {'word': 'of', 'start': 54.41999816894531, 'end': 54.70000076293945}, {'word': 'my', 'start': 54.70000076293945, 'end': 55.02000045776367}, {'word': 'body', 'start': 55.02000045776367, 'end': 55.15999984741211}, {'word': 'suffered', 'start': 55.15999984741211, 'end': 55.5}, {'word': 'burns', 'start': 55.5, 'end': 56.119998931884766}, {'word': 'I', 'start': 56.119998931884766, 'end': 56.459999084472656}, {'word': 'fell', 'start': 56.459999084472656, 'end': 56.720001220703125}, {'word': 'over', 'start': 56.720001220703125, 'end': 57.060001373291016}, {'word': '50', 'start': 57.060001373291016, 'end': 57.459999084472656}, {'word': 'feet', 'start': 57.459999084472656, 'end': 57.720001220703125}, {'word': 'from', 'start': 57.720001220703125, 'end': 57.900001525878906}, {'word': 'an', 'start': 57.900001525878906, 'end': 58.13999938964844}, {'word': 'overpass', 'start': 58.13999938964844, 'end': 58.619998931884766}, {'word': 'sustaining', 'start': 59.29999923706055, 'end': 59.29999923706055}, {'word': 'broken', 'start': 59.29999923706055, 'end': 59.70000076293945}, {'word': 'femur', 'start': 59.70000076293945, 'end': 60.08000183105469}, {'word': 'hip', 'start': 60.65999984741211, 'end': 60.70000076293945}, {'word': 'ribs', 'start': 61.2599983215332, 'end': 61.2599983215332}, {'word': 'and', 'start': 61.2599983215332, 'end': 61.900001525878906}, {'word': 'pelvis', 'start': 61.900001525878906, 'end': 61.900001525878906}, {'word': 'and', 'start': 62.18000030517578, 'end': 62.58000183105469}, {'word': 'continued', 'start': 62.58000183105469, 'end': 62.939998626708984}, {'word': 'to', 'start': 62.939998626708984, 'end': 63.15999984741211}, {'word': 'be', 'start': 63.15999984741211, 'end': 63.5}, {'word': 'burned', 'start': 63.5, 'end': 63.5}, {'word': 'on', 'start': 63.5, 'end': 63.7599983215332}, {'word': 'the', 'start': 63.7599983215332, 'end': 63.86000061035156}, {'word': 'ground', 'start': 63.86000061035156, 'end': 64.12000274658203}, {'word': 'I', 'start': 64.91999816894531, 'end': 65.04000091552734}, {'word': 'underwent', 'start': 65.04000091552734, 'end': 65.31999969482422}, {'word': 'over', 'start': 65.31999969482422, 'end': 65.66000366210938}, {'word': '21', 'start': 65.66000366210938, 'end': 66.13999938964844}, {'word': 'surgeries', 'start': 66.13999938964844, 'end': 66.72000122070312}, {'word': 'including', 'start': 67.33999633789062, 'end': 67.68000030517578}, {'word': 'reconstructive', 'start': 67.68000030517578, 'end': 68.45999908447266}, {'word': 'surgery', 'start': 68.45999908447266, 'end': 68.83999633789062}, {'word': 'for', 'start': 68.83999633789062, 'end': 69.0999984741211}, {'word': 'my', 'start': 69.0999984741211, 'end': 69.36000061035156}, {'word': 'left', 'start': 69.36000061035156, 'end': 69.5199966430664}, {'word': 'eye', 'start': 69.5199966430664, 'end': 69.91999816894531}, {'word': 'skin', 'start': 70.55999755859375, 'end': 70.63999938964844}, {'word': 'grafts', 'start': 70.63999938964844, 'end': 71.22000122070312}, {'word': 'and', 'start': 71.22000122070312, 'end': 71.44000244140625}, {'word': 'hip', 'start': 71.44000244140625, 'end': 71.54000091552734}, {'word': 'pinning', 'start': 71.54000091552734, 'end': 71.87999725341797}, {'word': 'I', 'start': 71.9800033569336, 'end': 72.31999969482422}, {'word': 'had', 'start': 72.31999969482422, 'end': 72.5}, {'word': 'just', 'start': 72.5, 'end': 72.83999633789062}, {'word': 'received', 'start': 72.83999633789062, 'end': 73.08000183105469}, {'word': 'a', 'start': 73.08000183105469, 'end': 73.55999755859375}, {'word': 'promotion', 'start': 73.55999755859375, 'end': 73.55999755859375}, {'word': 'at', 'start': 73.55999755859375, 'end': 73.77999877929688}, {'word': 'my', 'start': 73.77999877929688, 'end': 74.0199966430664}, {'word': 'job', 'start': 74.0199966430664, 'end': 74.30000305175781}, {'word': 'and', 'start': 74.30000305175781, 'end': 74.58000183105469}, {'word': 'finally', 'start': 74.58000183105469, 'end': 74.9000015258789}, {'word': 'managed', 'start': 74.9000015258789, 'end': 75.19999694824219}, {'word': 'to', 'start': 75.19999694824219, 'end': 75.44000244140625}, {'word': 'put', 'start': 75.44000244140625, 'end': 75.5199966430664}, {'word': 'a', 'start': 75.5199966430664, 'end': 75.69999694824219}, {'word': 'down', 'start': 75.69999694824219, 'end': 75.95999908447266}, {'word': 'payment', 'start': 75.95999908447266, 'end': 76.19999694824219}, {'word': 'on', 'start': 76.19999694824219, 'end': 76.41999816894531}, {'word': 'a', 'start': 76.41999816894531, 'end': 76.55999755859375}, {'word': 'new', 'start': 76.55999755859375, 'end': 76.80000305175781}, {'word': 'car', 'start': 76.80000305175781, 'end': 77.0199966430664}, {'word': 'I', 'start': 77.0199966430664, 'end': 77.23999786376953}, {'word': 'had', 'start': 77.23999786376953, 'end': 77.77999877929688}, {'word': 'purchased', 'start': 77.77999877929688, 'end': 77.77999877929688}, {'word': 'independently', 'start': 77.77999877929688, 'end': 78.33999633789062}, {'word': 'My', 'start': 78.69999694824219, 'end': 79.33999633789062}, {'word': 'family', 'start': 79.33999633789062, 'end': 79.66000366210938}, {'word': 'visited', 'start': 79.66000366210938, 'end': 79.9800033569336}, {'word': 'me', 'start': 79.9800033569336, 'end': 80.54000091552734}, {'word': 'daily', 'start': 80.54000091552734, 'end': 80.54000091552734}, {'word': 'in', 'start': 80.54000091552734, 'end': 80.73999786376953}, {'word': 'the', 'start': 80.73999786376953, 'end': 81.0199966430664}, {'word': 'hospital', 'start': 81.0199966430664, 'end': 81.26000213623047}, {'word': 'and', 'start': 81.62000274658203, 'end': 81.81999969482422}, {'word': 'I', 'start': 81.81999969482422, 'end': 81.94000244140625}, {'word': 'am', 'start': 81.94000244140625, 'end': 82.16000366210938}, {'word': 'incredibly', 'start': 82.16000366210938, 'end': 82.55999755859375}, {'word': 'grateful', 'start': 82.55999755859375, 'end': 82.94000244140625}, {'word': 'for', 'start': 82.94000244140625, 'end': 83.18000030517578}, {'word': 'their', 'start': 83.18000030517578, 'end': 83.4000015258789}, {'word': 'support', 'start': 83.4000015258789, 'end': 83.77999877929688}, {'word': 'However', 'start': 84.80000305175781, 'end': 85.36000061035156}, {'word': 'now', 'start': 85.66000366210938, 'end': 86.0}, {'word': 'I', 'start': 86.0, 'end': 86.18000030517578}, {'word': 'find', 'start': 86.18000030517578, 'end': 86.31999969482422}, {'word': 'myself', 'start': 86.31999969482422, 'end': 86.77999877929688}, {'word': 'struggling', 'start': 86.77999877929688, 'end': 87.19999694824219}, {'word': 'with', 'start': 87.19999694824219, 'end': 87.63999938964844}, {'word': 'discomfort', 'start': 87.63999938964844, 'end': 87.91999816894531}, {'word': 'about', 'start': 87.91999816894531, 'end': 88.26000213623047}, {'word': 'going', 'start': 88.26000213623047, 'end': 88.58000183105469}, {'word': 'outside', 'start': 88.58000183105469, 'end': 89.0999984741211}, {'word': 'or', 'start': 89.0999984741211, 'end': 89.33999633789062}, {'word': 'being', 'start': 89.33999633789062, 'end': 89.63999938964844}, {'word': 'seen', 'start': 89.63999938964844, 'end': 89.86000061035156}, {'word': 'by', 'start': 89.86000061035156, 'end': 90.18000030517578}, {'word': 'others', 'start': 90.18000030517578, 'end': 90.45999908447266}, {'word': "It's", 'start': 91.9000015258789, 'end': 92.0999984741211}, {'word': 'as', 'start': 92.0999984741211, 'end': 92.26000213623047}, {'word': 'if', 'start': 92.26000213623047, 'end': 92.5}, {'word': 'everything', 'start': 92.5, 'end': 92.80000305175781}, {'word': 'I', 'start': 92.80000305175781, 'end': 93.12000274658203}, {'word': 'was', 'start': 93.12000274658203, 'end': 93.27999877929688}, {'word': 'has', 'start': 93.27999877929688, 'end': 93.45999908447266}, {'word': 'been', 'start': 93.45999908447266, 'end': 93.68000030517578}, {'word': 'taken', 'start': 93.68000030517578, 'end': 93.83999633789062}, {'word': 'from', 'start': 93.83999633789062, 'end': 94.12000274658203}, {'word': 'me', 'start': 94.12000274658203, 'end': 94.27999877929688}, {'word': 'that', 'start': 94.27999877929688, 'end': 94.55999755859375}, {'word': 'night', 'start': 94.55999755859375, 'end': 94.76000213623047}]
    outputDir = "to_upload"
    language = "english"
    num = 0
    audio_name = "output.mp3"
    targetDir = os.path.join(outputDir, language, str(num))

    audio_file = os.path.join(targetDir, audio_name)
    clip = buildClip(video_file, audio_file)

    output_file = os.path.join(targetDir, "short.mp4")
    add_subtitles_to_video(clip, subs, output_file)


if __name__ == "__main__":
    test()

